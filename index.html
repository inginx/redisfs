<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Redisfs by steelThread</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Redisfs</h1>
          <h2>Utility for pumping files in and out of Redis in Node.js environments.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/steelThread/redisfs/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/steelThread/redisfs/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/steelThread/redisfs" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>About</h1>

<p>RedisFs is a dead simple utility for moving files in and out of Redis.</p>

<h1>Installing</h1>

<pre><code>$ npm install redisfs
</code></pre>

<h1>Usage</h1>

<p>There are two ways to use redisfs via the command line interface or programmatically
in your node scripts.</p>

<h2>Using redisfs from the command line.</h2>

<h3>file2redis</h3>

<pre><code>Usage:
  file2redis [OPTIONS] path

Available options:
  -h, --help         Displays options
  -v, --version      Shows file2redis' version.
  -k, --key          The key to set. (Defaults: generated key)
  -e, --encoding     The encoding to use. (Defaults: utf8)
  -d, --deleteFile   Indicator to delete the file after the op. (Defaults: false)
  -x, --expire       Key expire in seconds.

$  file2redis -e base64 /some/path/to/a/file
&gt;&gt; OK  key -&gt; redisfs:F246C436-B004-4218-B8AA-7766C6E0C604

$  file2redis -k my:key -d /some/path/to/a/file
&gt;&gt; OK  key -&gt; my:key
</code></pre>

<h3>redis2file</h3>

<pre><code>Usage:
  redis2file [OPTIONS] key

Available options:
  -h, --help         Displays options
  -v, --version      Shows file2redis' version.
  -f, --file         The path of the file to write to. (Defaults: generated temp file)
  -e, --encoding     The encoding to use. (Defaults: utf8)
  -p, --prefix       The filename prefix to use. (Defaults: redisfs)
  -s, --suffix       The filename suffix to use.
  -d, --deleteKey    Indicator to delete the key after the op. (Defaults: false)

$  redis2file -e base64 -f test/test.pdf redisfs:A8D367BD-1CE7-4FB3-9F90-2E94AF25430C
&gt;&gt; OK  file -&gt; test/test.pdf
</code></pre>

<h2>Using redisfs programmatically.</h2>

<h3>Configuration &amp; Construction</h3>

<p>redisfs supports the follow configuration options that can be passed into either
the RedisFs constructor or the redisfs factory method.</p>

<pre><code># options      - Optional hash of options.
#   redis      - Existing instance of node_client.
#   host       - String Redis host.  (Default: Redis' default)
#   port       - Integer Redis port.  (Default: Redis' default)
#   namespace  - String namespace prefix for generated Redis keys.
#                (Default: redisfs).
#   database   - Optional Integer of the Redis database to select.
#   prefix     - Optional prefix to use for generated files.  (Default: 'redisfs')
#   suffix     - Optional suffix to use for generated files.
#   deleteKey  - Optional boolean to indicate if the key should be
#                deleted on a redis2file operation.  (Default: true)
#   deleteFile - Optional boolean to indicate if the file should be
#                deleted on a file2redis operation.  (Default: true)
#   encoding   - Optional file encoding. (Default: 'utf8')
#   expire     - Optional Integer representing expiration sections for a key.

examples

// defaults
var redisfs = require('redisfs').redisfs();

// full customization
var redisfs = require('redisfs').redisfs({
  redis: clientInstance,
  namespace: 'my:namespace',
  prefix: 'my-prefix-',
  suffix: '.pdf',
  deleteKey: false,
  deleteFile: false
});
</code></pre>

<h3>file2redis</h3>

<pre><code># Pumps a file's contents into a redis key and deletes the file.
#   file         - The full path to the file to consume
#   options      - Optional hash of options. 
#     key        - Optional redis key.  If omitted a key will be
#                  generated using the default namespace and a uuid.
#     encoding   - Optional file encoding.
#     deleteFile - Optional boolean to indicate whether the file file
#                  should be deleted after it is pumped into redis.
#     expire     - Optional Integer representing expiration sections 
#                  for the key.
#   callback     - Recieves either an error as the first param
#                  or success hash that contains the key and reply
#                  as the second param.
file2redis: (file, options..., callback) -&gt;

examples

// defaults
redisfs.file2redis('/path/to/file, function(err, result) {
  if (err) throw err;
  console.log("Generated redis key: " + result.key);
  console.log("Redis output: " + result.reply);
});

// specify a key and override the encoding and deletion defaults
var options = {key: 'my:key', encoding: 'base64', deleteFile: false};
redisfs.file2redis('/path/to/file', options, function(err, result) {
  if (err) throw err;
  console.log("my redis key: " + result.key);
  console.log("Redis output: " + result.reply);
});
</code></pre>

<h3>redis2file</h3>

<pre><code>#
# Pumps a redis value to a file and deletes the redis key.
#   key         - The redis key to fetch.
#   options     - Optional hash of options.
#     file      - Optional file to write to. assumes the file is
#                 preexisting and writable.  If ommitted a temp file
#                 will be generated.
#     encoding  - Optional file encoding, defaults to utf8
#                 This overrides the instance level options if specified.
#     prefix    - Optional prefix to use for generated files.
#                 This overrides the instance level options if specified.
#     suffix    - Optional suffix to use for generated files.
#                 This overrides the instance level options if specified.
#     deleteKey - Optional boolean to indicate if the key should be
#                 removed after the get operation.  (Default: to value
#                 set on instance)
#   callback    - Receives the and error as the first param
#                 or a success hash that contains the file.
#                 *the path and a fd to the file.
#
redis2file: (key, options..., callback) -&gt;

examples

// defaults
redisfs.redis2file('my:key', function(err, result) {
  if (err) throw err;
  console.log("output file: " + result);
});

// customization
var options = {
  file: 'myfile',
  encoding: 'base64',
  deleteKey: false
};
redisfs.redis2file('my:key', options, function(err, result) {
  if (err) throw err;
  console.log("output file: " + result);
});

// customization
var options = {
  prefix: 'my-file-prefix-',
  suffix: '.txt'
};
redisfs.redis2file('my:key', options, function(err, result) {
  if (err) throw err;
  console.log("output file: " + result);
});
</code></pre>

<h3>cleanup</h3>

<pre><code>#
# Delete generated resources.
#   options - Optional object indicating which generated resources to
#             delete (keys and/or files). Omission of options will result
#             in the deletion of both files and keys.
#     keys  - Optional boolean indicating whether files should be
#             deleted.
#     files - Optional boolean indicating whether generated files
#             should be deleted.
#
cleanup: (options) -&gt;

examples

// defaults
redisfs.cleanup();

// delete keys but not files
redisfs.cleanup({files: false});
</code></pre>

<h3>end</h3>

<pre><code>#
# End the redis connection and deletes all the resources generated during
# the session.  Accepts the same args as cleanup.  To disable the cleanup
# pass false.
#
end: (options) -&gt;

examples

redisfs.end();
redisfs.end(false);
redisfs.end({keys: true, files: false});
</code></pre>

<h2>License</h2>

<p>MIT License</p>

<p>Copyright (c) 2011 Sean McDaniel</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>

<h4>Author: <a href="http://www.mcdconsultingllc.com">Sean McDaniel</a>
</h4>

<h4>Contributors:</h4>
        </section>

        <footer>
          Redisfs is maintained by <a href="https://github.com/steelThread">steelThread</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>