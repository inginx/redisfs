{"name":"Redisfs","body":"### About\r\nRedisFs is a dead simple utility for moving files in and out of Redis.\r\n\r\n### Installing\r\n\t$ npm install redisfs\r\n \r\n### Usage\r\nThere are two ways to use redisfs via the command line interface or programmatically\r\nin your node scripts.\r\n\r\n### Using redisfs from the command line.\r\n### file2redis\r\n\tUsage:\r\n\t  file2redis [OPTIONS] path\r\n\r\n\tAvailable options:\r\n\t  -h, --help         Displays options\r\n\t  -v, --version      Shows file2redis' version.\r\n\t  -k, --key          The key to set. (Defaults: generated key)\r\n\t  -e, --encoding     The encoding to use. (Defaults: utf8)\r\n\t  -d, --deleteFile   Indicator to delete the file after the op. (Defaults: false)\r\n\t  -x, --expire       Key expire in seconds.\r\n\r\n    $  file2redis -e base64 /some/path/to/a/file\r\n    >> OK  key -> redisfs:F246C436-B004-4218-B8AA-7766C6E0C604\r\n\r\n    $  file2redis -k my:key -d /some/path/to/a/file\r\n    >> OK  key -> my:key\r\n\r\n### redis2file\r\n\tUsage:\r\n\t  redis2file [OPTIONS] key\r\n\r\n\tAvailable options:\r\n\t  -h, --help         Displays options\r\n\t  -v, --version      Shows file2redis' version.\r\n\t  -f, --file         The path of the file to write to. (Defaults: generated temp file)\r\n\t  -e, --encoding     The encoding to use. (Defaults: utf8)\r\n\t  -p, --prefix       The filename prefix to use. (Defaults: redisfs)\r\n\t  -s, --suffix       The filename suffix to use.\r\n\t  -d, --deleteKey    Indicator to delete the key after the op. (Defaults: false)\r\n\r\n    $  redis2file -e base64 -f test/test.pdf redisfs:A8D367BD-1CE7-4FB3-9F90-2E94AF25430C\r\n\t>> OK  file -> test/test.pdf\r\n\r\n### Using redisfs programmatically.\r\n### Configuration & Construction\r\nredisfs supports the follow configuration options that can be passed into either\r\nthe RedisFs constructor or the redisfs factory method.\r\n\r\n\t# options      - Optional hash of options.\r\n\t#   redis      - Existing instance of node_client.\r\n\t#   host       - String Redis host.  (Default: Redis' default)\r\n\t#   port       - Integer Redis port.  (Default: Redis' default)\r\n\t#   namespace  - String namespace prefix for generated Redis keys.\r\n\t#                (Default: redisfs).\r\n\t#   database   - Optional Integer of the Redis database to select.\r\n\t#   prefix     - Optional prefix to use for generated files.  (Default: 'redisfs')\r\n\t#   suffix     - Optional suffix to use for generated files.\r\n\t#   deleteKey  - Optional boolean to indicate if the key should be\r\n\t#                deleted on a redis2file operation.  (Default: true)\r\n\t#   deleteFile - Optional boolean to indicate if the file should be\r\n\t#                deleted on a file2redis operation.  (Default: true)\r\n\t#   encoding   - Optional file encoding. (Default: 'utf8')\r\n\t#   expire     - Optional Integer representing expiration sections for a key.\r\n\t\r\n\texamples\r\n\t\r\n\t// defaults\r\n    var redisfs = require('redisfs').redisfs();\r\n\r\n    // full customization\r\n    var redisfs = require('redisfs').redisfs({\r\n\t  redis: clientInstance,\r\n\t  namespace: 'my:namespace',\r\n\t  prefix: 'my-prefix-',\r\n\t  suffix: '.pdf',\r\n\t  deleteKey: false,\r\n\t  deleteFile: false\r\n\t});\r\n\r\n### file2redis \r\n\r\n\t# Pumps a file's contents into a redis key and deletes the file.\r\n\t#   file         - The full path to the file to consume\r\n\t#   options      - Optional hash of options. \r\n\t#     key        - Optional redis key.  If omitted a key will be\r\n\t#                  generated using the default namespace and a uuid.\r\n\t#     encoding   - Optional file encoding.\r\n\t#     deleteFile - Optional boolean to indicate whether the file file\r\n\t#                  should be deleted after it is pumped into redis.\r\n    #     expire     - Optional Integer representing expiration sections \r\n    #                  for the key.\r\n\t#   callback     - Recieves either an error as the first param\r\n\t#                  or success hash that contains the key and reply\r\n\t#                  as the second param.\r\n\tfile2redis: (file, options..., callback) ->\r\n\r\n    examples\r\n\r\n    // defaults\r\n\tredisfs.file2redis('/path/to/file, function(err, result) {\r\n\t  if (err) throw err;\r\n\t  console.log(\"Generated redis key: \" + result.key);\r\n\t  console.log(\"Redis output: \" + result.reply);\r\n\t});\r\n\t\r\n\t// specify a key and override the encoding and deletion defaults\r\n\tvar options = {key: 'my:key', encoding: 'base64', deleteFile: false};\r\n\tredisfs.file2redis('/path/to/file', options, function(err, result) {\r\n\t  if (err) throw err;\r\n\t  console.log(\"my redis key: \" + result.key);\r\n\t  console.log(\"Redis output: \" + result.reply);\r\n\t});\r\n\t\r\n### redis2file\r\n\t#\r\n\t# Pumps a redis value to a file and deletes the redis key.\r\n\t#   key         - The redis key to fetch.\r\n\t#   options     - Optional hash of options.\r\n\t#     file      - Optional file to write to. assumes the file is\r\n\t#                 preexisting and writable.  If ommitted a temp file\r\n\t#                 will be generated.\r\n\t#     encoding  - Optional file encoding, defaults to utf8\r\n\t#                 This overrides the instance level options if specified.\r\n\t#     prefix    - Optional prefix to use for generated files.\r\n\t#                 This overrides the instance level options if specified.\r\n\t#     suffix    - Optional suffix to use for generated files.\r\n\t#                 This overrides the instance level options if specified.\r\n\t#     deleteKey - Optional boolean to indicate if the key should be\r\n\t#                 removed after the get operation.  (Default: to value\r\n\t#                 set on instance)\r\n\t#   callback    - Receives the and error as the first param\r\n\t#                 or a success hash that contains the file.\r\n\t#                 *the path and a fd to the file.\r\n\t#\r\n\tredis2file: (key, options..., callback) ->\r\n\r\n    examples\r\n\r\n    // defaults\r\n\tredisfs.redis2file('my:key', function(err, result) {\r\n\t  if (err) throw err;\r\n\t  console.log(\"output file: \" + result);\r\n\t});\r\n\r\n    // customization\r\n    var options = {\r\n\t  file: 'myfile',\r\n\t  encoding: 'base64',\r\n\t  deleteKey: false\r\n\t};\r\n\tredisfs.redis2file('my:key', options, function(err, result) {\r\n\t  if (err) throw err;\r\n\t  console.log(\"output file: \" + result);\r\n\t});\r\n\r\n    // customization\r\n    var options = {\r\n\t  prefix: 'my-file-prefix-',\r\n\t  suffix: '.txt'\r\n\t};\r\n\tredisfs.redis2file('my:key', options, function(err, result) {\r\n\t  if (err) throw err;\r\n\t  console.log(\"output file: \" + result);\r\n\t});\r\n\r\n### cleanup\r\n\t#\r\n\t# Delete generated resources.\r\n\t#   options - Optional object indicating which generated resources to\r\n\t#             delete (keys and/or files). Omission of options will result\r\n\t#             in the deletion of both files and keys.\r\n\t#     keys  - Optional boolean indicating whether files should be\r\n\t#             deleted.\r\n\t#     files - Optional boolean indicating whether generated files\r\n\t#             should be deleted.\r\n\t#\r\n    cleanup: (options) ->\r\n\r\n    examples\r\n\r\n    // defaults\r\n    redisfs.cleanup();\r\n\r\n    // delete keys but not files\r\n    redisfs.cleanup({files: false});\r\n\r\n### end\r\n\t#\r\n\t# End the redis connection and deletes all the resources generated during\r\n\t# the session.  Accepts the same args as cleanup.  To disable the cleanup\r\n\t# pass false.\r\n\t#\r\n\tend: (options) ->\r\n\t\r\n\texamples\r\n\t\r\n\tredisfs.end();\r\n\tredisfs.end(false);\r\n\tredisfs.end({keys: true, files: false});\r\n    \r\n### License\r\n\r\nMIT License\r\n\r\nCopyright (c) 2011 Sean McDaniel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n### Author: [Sean McDaniel](http://www.mcdconsultingllc.com)\r\n### Contributors:","tagline":"Utility for pumping files in and out of Redis in Node.js environments.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}